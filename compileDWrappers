@default dCompiler dmd
#@default libs "mscorlib System"
@default libs "mscorlib"

# limiting on windows much more since the compiler is usually 32 bit and has much less available memory
@windows    @default maxCompileSet 5
@notwindows @default maxCompileSet 45

@set includePaths "-I=dlang/src_hresult -I=dlang/src_cstring -I=dlang/src_coreclr -I=out/DerelictUtil/source -I=dlang/src_clr -I=dlang/src_clrbridge -I=out/dlibs/src"

@scope @foreach lib ${libs}
    # TODO: I don't think dmd works unless you use -lib on the -c compile commands??? But ldmd2 only with if you don't include -lib in the -c compile commands.
    rund dlang/compilechunker.d ${maxCompileSet} out/dlibs/src/${lib} out/dlibs/obj/${lib} ${dCompiler} -- ${includePaths} -- -lib -of=out/dlibs/${lib}
@end
